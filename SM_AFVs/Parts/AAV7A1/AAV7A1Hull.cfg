PART
{
name = AAV7A1
module = Part
author = Spanner

// --- asset parameters ---
MODEL
	{
		model = SM_AFVs/Parts/AAV7A1/AAV7A1
		scale = 1.0, 1.0, 1.0
	}
rescaleFactor = 1

buoyancy = 0.5
CoMOffset = 0, -0.55, 0.7
// --- node definitions ---
node_attach = 0.0, -0.425, -0.776, 0, -1, 0, 1
	NODE
{
name = Node1
transform = Node1
size = 2
method = FIXED_JOINT
}
	NODE
{
name = Node2
transform = Node2
size = 2
method = FIXED_JOINT
}
	NODE
{
name = Node3
transform = Node3
size = 2
method = FIXED_JOINT
}
	NODE
{
name = Node4
transform = Node4
size = 2
method = FIXED_JOINT
}
// --- editor parameters ---
TechRequired = precisionEngineering
entryCost = 2100
cost = 3500
category = none
subcategory = 0
title = #autoLOC_SMIndustries_5000266 //Amphibious Assault Vehicle Hull
manufacturer = SM Armory Tanks
description = #autoLOC_SMIndustries_5000267 //Amphibious Assault Vehicle  and IVA for 11 hardy/sacrificial Kerbals
// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 1,1,1,1,0

// --- standard part parameters ---
mass = 10
dragModelType = default
maximum_drag = 0.2
minimum_drag = 0.2
angularDrag = 2
crashTolerance = 100
maxTemp = 3600
vesselType = Rover
CrewCapacity = 11
bulkheadProfiles = size2
	fuelCrossFeed = True
	INTERNAL
		{
		name = AAVinternal
	}
	MODULE
	{
		name = ModuleCommand
		minimumCrew = 0
	}

MODULE
{
   name = ModuleAnimateGeneric
   
   animationName = AAVdoor
   layer = 1
  	allowDeployLimit = true
	revClampDirection = false
	revClampSpeed = true
	revClampPercent = true	
   startEventGUIName = OpenRearDoor
   endEventGUIName = CloseRearDoor
   actionGUIName = Toggle RearDoor
   instantAnimInEditor = false
}
MODULE
{
   name = ModuleAnimateGeneric
   
   animationName = AAVbowplane
   layer = 2
  	allowDeployLimit = true
	revClampDirection = false
	revClampSpeed = true
	revClampPercent = true	
   startEventGUIName = RaiseBowPlane
   endEventGUIName = LowerBowPlane
   actionGUIName = Toggle BowPlane
   instantAnimInEditor = false
}

	MODULE
{
	name = ModuleLight
	layer = 3
   lightName = Hlight, Hlight2
	useAnimationDim = true
	lightBrightenSpeed = 2.5
	lightDimSpeed = 2.5
	resourceAmount = 0.1
	animationName = AAVLights
	useResources = true
}

		RESOURCE
{
 name = IntakeAir
 amount = 10
 maxAmount = 20
}
	MODULE
	{
		name = ModuleResourceIntake
		resourceName = IntakeAir
		checkForOxygen = true
		area = 0.0099
		intakeSpeed = 10
		intakeTransformName = intake
	}

		EFFECTS
	{		
		throttle
		{			
			AUDIO
			{
				channel = Ship
				clip = SM_AFVs/Sounds/sound_v8idle2
				volume = 0.0 0.0
				volume = 0.01 1.0
				volume = 0.1 1.5
				volume = 0.4 2.0
				volume = 0.7 2.5
				volume = 1.0 3.0
				pitch = 0.0 0.7
				pitch = 1.0 1.6
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = exhaustTransform
				emission = 0.0 0.0
				emission = 0.05 0.1
				emission = 0.075 0.25
				emission = 1.0 1.52
				speed = 0.0 0.25
				speed = 1.0 1.52
				localOffset = 0, -0.0, 0
				localRotation = 1, 0, 0, -90
			}					
		}
	}
MODULE
	{
		name = KFAPUController
		throttleEffect = throttle
		startEffect = engage
		stopEffect = disengage
		noFuelEffect = flameout
		ConverterName = Engine
		StartActionName = StartMainEngine
		StopActionName = StopMainEngine
		ToggleActionName = Toggle Engine
		FillAmount = 1
		AutoShutdown = false
		GeneratesHeat = true
		UseSpecialistBonus = false
		INPUT_RESOURCE
		{
			ResourceName = LiquidFuel
			Ratio = 0.02025
			FlowMode = STAGE_PRIORITY_FLOW
  		}
		//inputs 2 & 3 are swapped between through the plugin to simulate open/closed mode switching
		INPUT_RESOURCE
		{
			ResourceName = IntakeAir
			Ratio = 0.02475
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = IntakeAir
			Ratio = 0.02475
			FlowMode = STAGE_PRIORITY_FLOW
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 18
			DumpExcess = true
		}
	}

MODULE
    {
	name = ModuleEnginesFX
	//engineID = WaterJet
	thrustVectorTransformName = thrustTransform
	exhaustDamage = False
	ignitionThreshold = 0.1
	minThrust = 0
	maxThrust = 100
	maxTemp = 600
	heatProduction = 100
	useEngineResponseTime = True
engineAccelerationSpeed = 0.7
    	engineDecelerationSpeed = 0.7
	PROPELLANT
	{
		name = ElectricCharge
       		ratio = 5.5
			DrawGauge = True
	}
	PROPELLANT
	{
		name = LiquidFuel
		ratio = 1
		DrawGauge = True
	}
		PROPELLANT
	{
		name = IntakeAir
		ignoreForIsp = True
		ratio = 10
	}
atmosphereCurve
		{
			key = 0 28000 0 0 
		}
		// Jet params
		atmChangeFlow = False
		useVelCurve = True
		useAtmCurve = False
		flowMultCap = 1.1
		//machLimit = 1.75
		machHeatMult = 20.0
		
		velCurve
		{
		key = 0 2.5 
		key = 0.03167219 1.3
		key = 0.04872517 0.3
		key = 0.05 0 

		}
	}
	

	MODULE
{
	name = ModuleAlternator	
	RESOURCE
	{
		name = ElectricCharge
		rate = 10
	}
}
MODULE
{
	name = ModuleGimbal
	gimbalTransformName =  thrustTransform
	gimbalRange = 25
}
	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = AAVrev
		startEventGUIName = Forward Thrust
		endEventGUIName = Reverse Thrust
		actionGUIName = Toggle Thrust Fwd
		instantAnimInEditor = false
	}
			MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = AAVrun
		
		responseSpeed = 0.09
		layer = 4
		dependOnEngineState = True
		dependOnThrottle = True
		weightOnOperational = True
		affectTime = false
		baseAnimSpeed = 0.5		// base + (throttle setting * multiplier)
		baseAnimSpeedMult = 100
		playInEditor = False
		animWrapMode = 2  	//	Default = 0	Once = 1		Clamp = 1	Loop = 2		PingPong = 4	ClampForever = 8
	}
   MODULE
	{
		name = ModuleDataTransmitter
		antennaType = INTERNAL
		packetInterval = 0.35
		packetSize = 4
		packetResourceCost = 24.0
		requiredResource = ElectricCharge
		antennaPower = 100000
		antennaCombinable = True
	}	
	MODULE
	{
		name = ModuleKerbNetAccess
		MinimumFoV = 17
		MaximumFoV = 63
		AnomalyDetection = 0
		DISPLAY_MODES
		{
			Mode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain
			Mode = Biome,#autoLOC_438890 //#autoLOC_438890 = Biome
		}
		REQUIRED_EFFECTS
		{
			Effect = ScienceSkill
		}
	}

	RESOURCE
{
	name = 20x102Ammo
	amount = 300
	maxAmount = 3000
}
RESOURCE
{
	name = ElectricCharge
	amount = 250
	maxAmount = 500
}
	RESOURCE
{
 name = LiquidFuel
 amount = 300
 maxAmount = 600
}
	DRAG_CUBE
	{
		cube = Default, 15.47,0.8765,2.876, 15.44,0.8819,2.498, 6.932,0.54,7.83, 6.931,0.8459,6.593, 23.91,0.8739,2.405, 23.9,0.8448,2.524, 0,-0.02705,-0.3737, 3.243,7.883,2.562
	}

}

